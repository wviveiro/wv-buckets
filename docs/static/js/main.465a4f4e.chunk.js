(this["webpackJsonpgoogle-api"]=this["webpackJsonpgoogle-api"]||[]).push([[0],{69:function(e,t,n){"use strict";n.r(t);var r,a,c,i=n(0),o=n(20),s=n.n(o),l=n(19),u=n(9),d=n(1),h=Object(u.b)(r||(r=Object(l.a)(["\n    \n    html, body, #root {\n      height: 100%;\n    }\n\n    * {\n        box-sizing: border-box;\n        font-family: 'Open Sans', sans-serif;\n    }\n\n    html {\n      padding: ",";\n    }\n\n    h1, h2 {\n      font-weight: bold;\n    }\n\n    button, a {\n      border: 0;\n      background: none;\n      text-decoration: none;\n    }\n  "])),(function(e){return e.theme.device.padding})),p={colors:{primary:"var(--bs-primary)",danger:"var(--bs-danger)",background:"#3264a8",textWhite:"#FFF",textBlack:"#000"},device:{padding:"env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left)"}},b=function(e){var t=e.children;return Object(d.jsxs)(u.a,{theme:p,children:[Object(d.jsx)(h,{}),t]})},f=n(2),j=n(8),m=n(73),g=Object(u.d)(m.a)(a||(a=Object(l.a)(["\n  position: 'fixed';\n  bottom: 0;\n  width: 100%;\n  z-index: 1051;\n"]))),O=function(e){},x=function(){var e=Object(i.useState)([]),t=Object(j.a)(e,2),n=t[0],r=t[1];Object(i.useEffect)((function(){var e=!0;return O=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warning";if(e){"string"!==typeof t&&(console.error("Error: ",t),t="Invalid error message");var c=n.slice(0);c.push({message:t,variant:a}),r(c)}},function(){e=!1}}),[n]);return Object(d.jsx)(d.Fragment,{children:n.map((function(e,t){return Object(d.jsx)(v,Object(f.a)(Object(f.a)({},e),{},{onClose:(a=t,function(){var e=n.slice(0);e.splice(a,1),r(e)})}),t);var a}))})},v=function(e){var t=e.message,n=e.variant,r=e.onClose,a=Object(i.useState)(!0),c=Object(j.a)(a,2),o=c[0],s=c[1];return Object(i.useEffect)((function(){var e=!0;return setTimeout((function(){e&&s(!1)}),3e3),function(){e=!1}}),[]),Object(i.useEffect)((function(){var e=!0;return o||setTimeout((function(){e&&r&&r()}),500),function(){e=!1}}),[o,r]),Object(d.jsx)(g,{variant:n,show:o,onClick:function(){return s(!1)},style:{position:"fixed",bottom:"0"},children:t})};!function(e){e[e.initializing=1]="initializing",e[e.loaded=2]="loaded",e[e.loading=3]="loading"}(c||(c={}));var w,y,k,C,I,N,E,S,_,A=n(50),M=n.n(A),B=function(e){var t=M()(Object(f.a)({status:c.initializing},e)),n=Object(j.a)(t,2),r=n[0],a=n[1],i=r.status!==c.loaded;return[Object(f.a)(Object(f.a)({},r),{},{disabled:i}),a]},z=n(4),D=n.n(z),T=u.d.div.withConfig({displayName:"bottom-modalstyled__BottomModalContainerInner",componentId:"sc-eaaltb-0"})([""]),F=u.d.h2.withConfig({displayName:"bottom-modalstyled__BottomModalTitleContainer",componentId:"sc-eaaltb-1"})([""]),L=u.d.p.withConfig({displayName:"bottom-modalstyled__BottomModalDisclaimer",componentId:"sc-eaaltb-2"})([""]),P=u.d.div.withConfig({displayName:"bottom-modalstyled__BottomModalContainer",componentId:"sc-eaaltb-3"})(["position:fixed;top:0;bottom:0;left:0;right:0;transition:background-color ","ms linear;"," ","{margin-bottom:20px;}","{font-style:italic;font-size:0.85rem;opacity:0.7;}.main-container-menu{position:fixed;width:100%;bottom:0;transition:bottom ","ms linear;"," .main-content-bottom-modal{margin-bottom:15px;}.menu-item{a,button{color:",";border-top:solid 1px #eee;width:100%;padding:10px;}&.text-danger{a,button{color:",";}}&:only-child{a,button{border-top:0;padding:0;}}}}","{color:",";background:#fff;border-radius:30px 30px 0 0;padding:30px;text-align:center;}&.isMenu ","{border-radius:15px;margin:0 15px;padding:15px;&:not(:first-child){margin-top:10px;}}"],250,(function(e){return e.show?Object(u.c)(w||(w=Object(l.a)(["\n          background-color: rgba(0, 0, 0, 0.5);\n        "]))):Object(u.c)(y||(y=Object(l.a)(["\n          background-color: transparent;\n        "])))}),F,L,250,(function(e){return e.show?Object(u.c)(k||(k=Object(l.a)(["\n            bottom: 0;\n          "]))):Object(u.c)(C||(C=Object(l.a)(["\n            bottom: -100vh;\n          "])))}),(function(e){return e.theme.colors.primary}),(function(e){return e.theme.colors.danger}),T,(function(e){return e.theme.colors.textBlack}),T),U=u.d.button.withConfig({displayName:"bottom-modalstyled__BottomModalButton",componentId:"sc-eaaltb-4"})(["width:100%;"," &:disabled{opacity:0.5;}"],(function(e){return e.variant&&"regular"!==e.variant?Object(u.c)(N||(N=Object(l.a)(["\n          padding: 20px;\n          background: ",";\n          color: ",";\n          border: 0;\n          border-radius: 5px;\n          margin: 30px 0 10px;\n          text-transform: uppercase;\n        "])),"primary"===e.variant?e.theme.colors.background:e.theme.colors[e.variant],(function(e){return e.theme.colors.textWhite})):Object(u.c)(I||(I=Object(l.a)(["\n          color: #000;\n          font-weight: bold;\n          text-decoration: none;\n        "])))})),R=n(21),W=function(e){var t=e.children,n=e.className,r=function(e){var t=B({show:!1}),n=Object(j.a)(t,2),r=n[0],a=n[1],c=e.show,o=e.onOpen,s=e.onClose;return Object(i.useEffect)((function(){r.show!==c&&(a({show:c}),setTimeout((function(){c&&o?o():!c&&s&&s()}),250))}),[c,a,r.show,s,o]),{state:r}}(e),a=r.state;return Object(d.jsx)(P,{show:a.show,className:D()(n,{isMenu:!!e.menu}),children:Object(d.jsx)("div",{className:"main-container-menu",children:e.menu?e.menu.map((function(e,n){return Object(d.jsxs)(T,{children:[0===n&&t&&Object(d.jsx)("div",{className:"main-content-bottom-modal",children:t}),e.map((function(e,t){return Object(d.jsx)("div",{className:D()("menu-item",e.className),children:e.href?Object(d.jsx)("a",{href:e.href,onClick:e.onClick,children:e.label}):e.to?Object(d.jsx)(R.b,{to:e.to,children:e.label}):Object(d.jsx)("button",{onClick:e.onClick,children:e.label})},t)}))]},n)})):Object(d.jsx)(T,{children:t})})})},V={Title:F,Disclaimer:L,Button:U},G=Object.assign(W,V),H={status:c.loaded,title:"Are you sure?",description:"This action cannot be undone",confirmText:"CONFIRM",cancelText:"CANCEL",confirmVariant:"danger",cancelVariant:"regular",show:!1,closed:!0,onCancel:function(){},onConfirm:function(){}},J=function(e){},Y=function(){var e=B(H),t=Object(j.a)(e,2),n=t[0],r=t[1];Object(i.useEffect)((function(){J=function(e){r(Object(f.a)(Object(f.a)({},e),{},{show:!0,closed:!1}))}}),[r]);return n.closed?null:Object(d.jsxs)(G,{show:n.show,onClose:function(){r(H)},children:[Object(d.jsx)(G.Title,{children:n.title}),Object(d.jsx)(G.Disclaimer,{children:n.description}),Object(d.jsx)(G.Button,{variant:n.confirmVariant,onClick:function(e){n.onConfirm(e),e.isDefaultPrevented()||e.isPropagationStopped()||r({show:!1})},children:n.confirmText}),Object(d.jsx)(G.Button,{variant:n.cancelVariant,onClick:function(e){n.onCancel(e),e.isDefaultPrevented()||e.isPropagationStopped()||r({show:!1})},children:n.cancelText})]})},$=n(26),q=Object($.b)({selectId:function(e){return e.spreadsheetId}}),K=Object($.c)({name:"account",initialState:q.getInitialState(),reducers:{importAccounts:function(e,t){var n=t.payload.map((function(e){return{title:"",spreadsheetId:e,initialised:!1,loading:!1,error:!1}}));q.upsertMany(e,n)},startLoadingAccount:function(e,t){var n=t.payload,r=e.entities[n];r&&(r.loading=!0,r.error=!1)},loadAccounts:function(e,t){var n=t.payload;q.upsertMany(e,n)},removeAccount:function(e,t){var n=t.payload;q.removeOne(e,n)}}}),X=K.actions,Q=X.importAccounts,Z=X.startLoadingAccount,ee=X.loadAccounts,te=X.removeAccount,ne=K.reducer,re=Object($.c)({name:"auth",initialState:{status:c.initializing,authenticated:!1,signedin:!1},reducers:{setAuth:function(e,t){var n=t.payload;Object.prototype.hasOwnProperty.call(n,"status")&&(e.status=n.status),Object.prototype.hasOwnProperty.call(n,"authenticated")&&(e.authenticated=n.authenticated),Object.prototype.hasOwnProperty.call(n,"signedin")&&(e.signedin=n.signedin)}}}),ae=re.actions.setAuth,ce=re.reducer,ie=Object($.a)({reducer:{accounts:ne,auth:ce}}),oe=n(16),se=n(71),le=u.d.div.withConfig({displayName:"loginstyled__LoginContainer",componentId:"sc-17bo6ca-0"})(["width:100%;height:100%;display:flex;justify-content:center;align-items:center;flex-direction:column;"]),ue=Object(u.d)(se.a).withConfig({displayName:"loginstyled__LoginButtton",componentId:"sc-17bo6ca-1"})(["padding:0;border:0;padding-right:15px;& > svg{width:40px;}"]),de=["title","titleId"];function he(){return he=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},he.apply(this,arguments)}function pe(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function be(e,t){var n=e.title,r=e.titleId,a=pe(e,de);return i.createElement("svg",he({viewBox:"0 0 46 46",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":r},a),void 0===n?i.createElement("title",{id:r},"btn_google_light_normal_ios"):n?i.createElement("title",{id:r},n):null,E||(E=i.createElement("desc",null,"Created with Sketch.")),S||(S=i.createElement("defs",null,i.createElement("filter",{id:"b",x:"-50%",y:"-50%",width:"200%",height:"200%"},i.createElement("feOffset",{dx:0,dy:1,in:"SourceAlpha",result:"shadowOffsetOuter1"}),i.createElement("feGaussianBlur",{in:"shadowOffsetOuter1",result:"shadowBlurOuter1",stdDeviation:.5}),i.createElement("feColorMatrix",{in:"shadowBlurOuter1",result:"shadowMatrixOuter1",values:"0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.168 0"}),i.createElement("feOffset",{dx:0,dy:0,in:"SourceAlpha",result:"shadowOffsetOuter2"}),i.createElement("feGaussianBlur",{in:"shadowOffsetOuter2",result:"shadowBlurOuter2",stdDeviation:.5}),i.createElement("feColorMatrix",{in:"shadowBlurOuter2",result:"shadowMatrixOuter2",values:"0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.084 0"}),i.createElement("feMerge",null,i.createElement("feMergeNode",{in:"shadowMatrixOuter1"}),i.createElement("feMergeNode",{in:"shadowMatrixOuter2"}),i.createElement("feMergeNode",{in:"SourceGraphic"}))),i.createElement("rect",{id:"a",width:40,height:40,rx:2}))),_||(_=i.createElement("g",{fill:"none",fillRule:"evenodd"},i.createElement("g",{transform:"translate(-1 -1)"},i.createElement("g",{transform:"translate(4 4)",filter:"url(#b)"},i.createElement("use",{fill:"#FFFFFF",fillRule:"evenodd",xlinkHref:"#a"}),i.createElement("use",{fill:"none",xlinkHref:"#a"}),i.createElement("use",{fill:"none",xlinkHref:"#a"}),i.createElement("use",{fill:"none",xlinkHref:"#a"})),i.createElement("g",{transform:"translate(15 15)"},i.createElement("path",{d:"m17.64 9.2045c0-0.63818-0.057273-1.2518-0.16364-1.8409h-8.4764v3.4814h4.8436c-0.20864 1.125-0.84273 2.0782-1.7959 2.7164v2.2582h2.9086c1.7018-1.5668 2.6836-3.8741 2.6836-6.615z",fill:"#4285F4"}),i.createElement("path",{d:"m9 18c2.43 0 4.4673-0.80591 5.9564-2.1805l-2.9086-2.2582c-0.80591 0.54-1.8368 0.85909-3.0477 0.85909-2.3441 0-4.3282-1.5832-5.0359-3.7105h-3.0068v2.3318c1.4809 2.9414 4.5245 4.9582 8.0427 4.9582z",fill:"#34A853"}),i.createElement("path",{d:"m3.9641 10.71c-0.18-0.54-0.28227-1.1168-0.28227-1.71s0.10227-1.17 0.28227-1.71v-2.3318h-3.0068c-0.60955 1.215-0.95727 2.5895-0.95727 4.0418 0 1.4523 0.34773 2.8268 0.95727 4.0418l3.0068-2.3318z",fill:"#FBBC05"}),i.createElement("path",{d:"m9 3.5795c1.3214 0 2.5077 0.45409 3.4405 1.3459l2.5814-2.5814c-1.5586-1.4523-3.5959-2.3441-6.0218-2.3441-3.5182 0-6.5618 2.0168-8.0427 4.9582l3.0068 2.3318c0.70773-2.1273 2.6918-3.7105 5.0359-3.7105z",fill:"#EA4335"}),i.createElement("path",{d:"m0 0h18v18h-18v-18z"}))))))}var fe,je=i.forwardRef(be),me=(n.p,n(6)),ge=n.n(me),Oe=n(12),xe=n(24);!function(e){e.name="wvbucketSettings"}(fe||(fe={}));var ve,we=function(){var e={apikey:"",client_id:"",spid:"",accounts:[]},t=localStorage.getItem(fe.name);if(!t)return e;var n=JSON.parse(t);return n||e},ye=function(e){!function(e){localStorage.setItem(fe.name,JSON.stringify(e))}(Object(f.a)(Object(f.a)({},we()),e))},ke=function(e){for(var t="";e>0;){var n=(e-1)%26;t="".concat(String.fromCharCode(65+n)).concat(t),e=(e-n)/26|0}return t},Ce=function(e){var t,n,r,a;return console.error(e),"string"===typeof e?e:(null===e||void 0===e?void 0:e.message)?e.message:(null===e||void 0===e?void 0:e.details)?e.details:(null===e||void 0===e||null===(t=e.result)||void 0===t||null===(n=t.error)||void 0===n?void 0:n.message)?null===e||void 0===e||null===(r=e.result)||void 0===r||null===(a=r.error)||void 0===a?void 0:a.message:"Something went wrong trying to authenticated. Check your log"},Ie=function(){var e=Object(Oe.a)(ge.a.mark((function e(){var t;return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=we()).client_id&&gapi){e.next=3;break}throw new Error("Missing client ID or GAPI");case 3:return e.abrupt("return",new Promise(function(){var e=Object(Oe.a)(ge.a.mark((function e(n,r){var a;return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=function(){var e=Object(Oe.a)(ge.a.mark((function e(){return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,gapi.client.init({discoveryDocs:["https://sheets.googleapis.com/$discovery/rest?version=v4"],clientId:t.client_id,scope:"https://www.googleapis.com/auth/spreadsheets"});case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return",r(Ce(e.t0)));case 8:n(!0);case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}(),gapi.load("client:auth2",a);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ne=[],Ee=function(e){Ne.push(e);return gapi.auth2.getAuthInstance().isSignedIn.listen((function(e){Ne.forEach((function(t){return t(e)}))})),function(){Ne=Ne.filter((function(t){return t!==e}))}},Se=function(){var e=Object(Oe.a)(ge.a.mark((function e(t){return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(Oe.a)(ge.a.mark((function e(n,r){var a;return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,gapi.client.sheets.spreadsheets.get({spreadsheetId:t,fields:"sheets.properties.title,sheets.properties.sheetId,properties.title"});case 3:return a=e.sent,e.abrupt("return",n(a));case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",r(Ce(e.t0)));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_e=function(){var e=Object(Oe.a)(ge.a.mark((function e(t,n,r){var a,c,i,o;return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,gapi.client.sheets.spreadsheets.batchUpdate({spreadsheetId:t,resource:{requests:[{addSheet:{properties:{title:n}}}]}});case 3:return i=e.sent,e.next=6,Ae(t,n,[r]);case 6:if(o=null===(a=i.result.replies)||void 0===a||null===(c=a[0].addSheet)||void 0===c?void 0:c.properties){e.next=9;break}throw new Error("Invalid response from the api.");case 9:return e.abrupt("return",{title:o.title,sheetId:o.sheetId});case 12:throw e.prev=12,e.t0=e.catch(0),Ce(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,n,r){return e.apply(this,arguments)}}(),Ae=function(){var e=Object(Oe.a)(ge.a.mark((function e(t,n,r){var a;return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,gapi.client.sheets.spreadsheets.values.append({spreadsheetId:t,range:"".concat(n,"!A1"),valueInputOption:"USER_ENTERED",resource:{values:r}});case 3:return a=e.sent,e.abrupt("return",a);case 7:throw e.prev=7,e.t0=e.catch(0),Ce(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),Me=function(){var e=Object(Oe.a)(ge.a.mark((function e(t,n,r){var a,c,i,o,s,l,u;return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(f.a)({from:2,columns:3},r||{}),c=!a.to,a.from<2&&(a.from=2),i=a.from-2+1e3,o=ke(a.columns||1),e.next=7,gapi.client.sheets.spreadsheets.values.get({spreadsheetId:t,range:"".concat(n,"!A").concat(a.from,":").concat(o).concat(c?i:a.to)});case 7:if(s=e.sent,l=s.result.values||[],!c){e.next=20;break}if(u=i-a.from,!(l.length>=u)){e.next=20;break}return e.t0=[],e.t1=Object(xe.a)(l),e.t2=xe.a,e.next=17,Me(t,n,Object(f.a)(Object(f.a)({},a),{},{from:i+1}));case 17:e.t3=e.sent,e.t4=(0,e.t2)(e.t3),l=e.t0.concat.call(e.t0,e.t1,e.t4);case 20:return e.abrupt("return",l);case 21:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Be=function(){var e=Object(Oe.a)(ge.a.mark((function e(t){var n;return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gapi.client.sheets.spreadsheets.create({resource:{properties:{title:t}}});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ze=function(){var e=function(){var e=B({status:c.loaded}),t=Object(j.a)(e,2),n=t[0],r=t[1],a=function(){var e=Object(Oe.a)(ge.a.mark((function e(){return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r({status:c.loading}),e.prev=1,e.next=4,gapi.auth2.getAuthInstance().signIn();case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),console.error(e.t0),O("Something went wrong trying to log you in","danger");case 10:r({status:c.loaded});case 11:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(){return e.apply(this,arguments)}}();return{state:n,onLogin:a}}(),t=e.state,n=e.onLogin;return Object(d.jsx)(le,{children:Object(d.jsxs)(ue,{disabled:t.disabled,onClick:n,children:[Object(d.jsx)(je,{})," Login with Google"]})})},De=n(11),Te=n(5),Fe=n(25),Le=n(23),Pe=function(){var e=B({status:c.loaded,sideMenu:!1,width:window.innerWidth}),t=Object(j.a)(e,2),n=t[0],r=t[1];Object(i.useEffect)((function(){var e=!0,t=function(){e&&r({width:window.innerWidth})};return window.addEventListener("resize",t),function(){e=!1,window.removeEventListener("resize",t)}}),[r]);return{state:n,toggleSideMenu:function(e){return function(){r({sideMenu:void 0!==e?e:!n.sideMenu})}},onSignout:function(){gapi.auth2.getAuthInstance().signOut()},confirmDeleteSettings:function(){J({description:"All data of the application will be deleted, but the spreadsheets will be kept under your google account",onConfirm:function(){localStorage.removeItem(fe.name),window.location.reload()}})}}},Ue=u.d.div.withConfig({displayName:"layoutstyled__LayoutContainer",componentId:"sc-12p4uxt-0"})(["width:100%;height:100%;background:",";color:",";& > .layout-header{position:fixed;width:100%;height:50px;display:flex;align-items:center;justify-content:flex-end;padding-right:10px;& > .menu-button{color:",";font-size:1.3em;}}& > .slide-right-menu{position:fixed;top:0;bottom:0;right:0;background-color:var(--bs-gray-dark);padding:",";width:100%;transition:right 0.5s;& > .slide-header{height:50px;display:flex;align-items:center;padding:0 10px;& > .right-side{& > .button-close-slide{color:",";font-size:1.3em;}}& > .center-side{flex-grow:1;text-align:center;}}& > .slide-content{& > ul{list-style:none;padding:0;& > li{padding:10px 5px;.info-versioning{padding-left:10px;font-style:italic;opacity:0.7;}}}}}"],(function(e){return e.theme.colors.background}),(function(e){return e.theme.colors.textWhite}),(function(e){return e.theme.colors.textWhite}),(function(e){return e.theme.device.padding}),(function(e){return e.theme.colors.textWhite})),Re=function(e){var t=e.children,n=Pe(),r=n.state,a=n.toggleSideMenu,c=n.onSignout,i=n.confirmDeleteSettings;return Object(d.jsxs)(Ue,{children:[Object(d.jsx)("div",{className:"layout-header",children:Object(d.jsx)("button",{className:"menu-button",onClick:a(!0),disabled:r.disabled,children:Object(d.jsx)(Le.a,{icon:Fe.a})})}),t,Object(d.jsxs)("div",{className:"slide-right-menu",style:{right:r.sideMenu?void 0:"-".concat(r.width,"px")},children:[Object(d.jsxs)("div",{className:"slide-header",children:[Object(d.jsx)("div",{className:"right-side",children:Object(d.jsx)("button",{className:"button-close-slide",disabled:r.disabled,onClick:a(!1),children:Object(d.jsx)(Le.a,{icon:Fe.b})})}),Object(d.jsx)("div",{className:"center-side",children:"WVBuckets"})]}),Object(d.jsxs)("div",{className:"slide-content",children:[Object(d.jsx)("hr",{}),Object(d.jsxs)("ul",{children:[Object(d.jsx)("li",{children:Object(d.jsxs)("button",{className:"logout-button text-primary",disabled:r.disabled,onClick:c,children:[Object(d.jsx)("i",{className:"fas fa-sign-out-alt"})," Logout"]})}),Object(d.jsx)("li",{children:Object(d.jsx)("button",{className:"delete-settings-button text-danger",disabled:r.disabled,onClick:i,children:"Delete Settings"})}),Object(d.jsx)("li",{children:Object(d.jsxs)("span",{className:"info-versioning",children:["version: ","v0.1.3"]})})]})]})]})]})},We=function(e){return e.auth},Ve=["component"],Ge=["component"],He=function(e){var t=e.component,n=Object(Te.a)(e,Ve);return Object(d.jsx)(De.a,Object(f.a)(Object(f.a)({},n),{},{render:function(e){return Object(d.jsx)(Je,Object(f.a)(Object(f.a)({},e),{},{component:t}))}}))},Je=function(e){var t=e.component,n=Object(Te.a)(e,Ge),r=Object(oe.c)(We).signedin;return t&&r?Object(d.jsx)(Re,{children:Object(d.jsx)(t,Object(f.a)({},n))}):null},Ye=function(e){var t=function(e){var t=Object(i.useState)(!0),n=Object(j.a)(t,2),r=n[0],a=n[1],c=Object(i.useState)(!1),o=Object(j.a)(c,2),s=o[0],l=o[1];return Object(i.useLayoutEffect)((function(){!s&&e.show&&r?a(!1):!s&&e.show?l(!0):!s||e.show||r||l(!1)}),[e.show,s,r]),{closed:r,show:s,onClose:function(){a(!0)}}}(e),n=t.show,r=t.closed,a=t.onClose;return r?null:Object(d.jsx)(W,{show:n,onClose:a,menu:e.menu,children:e.children})},$e=n(52),qe=n(14),Ke=function(e){return e.accounts},Xe=[{name:"WVBUCKET",schema:{date:{label:"Date"},amount:{label:"Amount",type:"number"},category:{label:"Category"},message:{label:"Message"}}}],Qe=n(39),Ze=function(){var e=Object(Oe.a)(ge.a.mark((function e(t){var n,r,a,c,i,o,s,l,u,d,h;return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],r=Object(Qe.a)(t),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=36;break}return c=a.value,e.prev=6,e.next=9,Se(c);case 9:o=e.sent,s=(o.result.sheets||[]).reduce((function(e,t){var n;if(!t.properties)return e;var r=(null===(n=t.properties)||void 0===n?void 0:n.title)||"Untitled";return Object(f.a)(Object(f.a)({},e),{},Object(qe.a)({},r,t.properties))}),{}),l={},u=Object(Qe.a)(Xe),e.prev=13,h=ge.a.mark((function e(){var t,n,r;return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.value,s[t.name]){e.next=8;break}return e.next=4,_e(c,t.name,Object.entries(t.schema).map((function(e){var t=Object(j.a)(e,2);t[0];return t[1].label})));case 4:n=e.sent,l[t.name]={id:n.sheetId||0,rows:[]},e.next=9;break;case 8:l[t.name]={id:s[t.name].sheetId||0,rows:[]};case 9:return e.next=11,Me(c,t.name,{columns:Object.entries(t.schema).length});case 11:r=e.sent,l[t.name].rows=r.map((function(e,n){var r=Object.entries(t.schema).map((function(t,n){var r=Object(j.a)(t,2),a=r[0],c=r[1];return[a,e[n],c.type]}));return r.reduce((function(e,t){var n=t[1];if("number"===t[2]){var r=+n.replace(/[$,]/g,"");isNaN(r)||(n=r)}return Object(f.a)(Object(f.a)({},e),{},Object(qe.a)({},t[0],n))}),{})}));case 13:case"end":return e.stop()}}),e)})),u.s();case 16:if((d=u.n()).done){e.next=20;break}return e.delegateYield(h(),"t0",18);case 18:e.next=16;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(13),u.e(e.t1);case 25:return e.prev=25,u.f(),e.finish(25);case 28:n.push({title:(null===(i=o.result.properties)||void 0===i?void 0:i.title)||"Untitled",spreadsheetId:c,schemas:l,initialised:!0,loading:!1,error:!1}),e.next=34;break;case 31:e.prev=31,e.t2=e.catch(6),n.push({title:"Untitled",spreadsheetId:c,schemas:void 0,error:Ce(e.t2),initialised:!0,loading:!1});case 34:e.next=4;break;case 36:e.next=41;break;case 38:e.prev=38,e.t3=e.catch(2),r.e(e.t3);case 41:return e.prev=41,r.f(),e.finish(41);case 44:return e.abrupt("return",n);case 45:case"end":return e.stop()}}),e,null,[[2,38,41,44],[6,31],[13,22,25,28]])})));return function(t){return e.apply(this,arguments)}}(),et=function(e){var t=e.account,n=e.onShowMenu,r=Object(oe.b)(),a=function(e){var t=Object(oe.c)(Ke),n=Object(i.useMemo)((function(){return t.entities[e]||!1}),[t,e]),r=Object(i.useMemo)((function(){var e;return n&&(null===(e=n.schemas)||void 0===e?void 0:e.WVBUCKET.rows.map((function(e,t){return Object(f.a)({id:t},e)})))||[]}),[n]),a=Object(i.useMemo)((function(){return r.reduce((function(e,t){return e+100*t.amount}),0)/100}),[r]),c=Object(i.useMemo)((function(){return r.reduce((function(e,t){return e.ids.includes(t.category)?Object(f.a)(Object(f.a)({},e),{},{buckets:Object(f.a)(Object(f.a)({},e.buckets),{},Object(qe.a)({},t.category,[].concat(Object(xe.a)(e.buckets[t.category]),[t])))}):{ids:[].concat(Object(xe.a)(e.ids),[t.category]),buckets:Object(f.a)(Object(f.a)({},e.buckets),{},Object(qe.a)({},t.category,[t]))}}),{ids:[],buckets:{}})}),[r]);return{account:n,rows:r,buckets:c,balance:a}}(t.spreadsheetId),c=a.balance,o=a.buckets;return Object(i.useEffect)((function(){if(!t.initialised){var e=!0,n=function(){var n=Object(Oe.a)(ge.a.mark((function n(){var a;return ge.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(Z(t.spreadsheetId)),n.next=3,Ze([t.spreadsheetId]);case 3:if(a=n.sent,e){n.next=6;break}return n.abrupt("return");case 6:r(ee(a));case 7:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return n(),function(){e=!1}}}),[t.spreadsheetId,t.initialised,r]),{account:t,balance:c,buckets:o,onShowMenu:n}},tt=u.d.div.withConfig({displayName:"accountstyled__AccountContainer",componentId:"sc-16opo0g-0"})(["background:#fff;color:#000;display:flex;padding:15px;margin:10px 0;border-radius:4px;position:relative;.loading-account{color:#ccc;width:100%;p{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;}}.icon-area{width:30px;.icon{display:block;}}.account-details{color:#aaa;flex-grow:1;width:calc(100% - 30px);h4{color:#000;font-size:1rem;font-weight:bold;margin-bottom:0;flex-grow:1;}.account-id{display:block;width:100%;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;font-size:0.8rem;}.account-summary{margin-top:10px;font-size:0.9rem;.account-summary-line{display:flex;align-items:center;justify-content:space-between;.total-summary{color:#000;font-weight:bold;}}}}.button-more{position:absolute;right:5px;top:0px;font-size:1rem;}"]),nt=function(e){var t=et(e),n=t.account,r=t.balance,a=t.buckets,c=t.onShowMenu;return n.loading?Object(d.jsx)(tt,{children:Object(d.jsxs)("div",{className:"loading-account",children:[Object(d.jsx)("div",{children:Object(d.jsx)("i",{className:"fas fa-fan fa-spin splash-screen-spinner"})}),Object(d.jsx)("p",{children:"Loading Account"}),Object(d.jsx)("p",{children:n.spreadsheetId})]})}):(n.error&&n.error,n.initialised?Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)(tt,{children:[Object(d.jsx)("div",{className:"icon-area",children:Object(d.jsx)(Le.a,{icon:$e.a,className:"icon"})}),Object(d.jsxs)("div",{className:"account-details",children:[Object(d.jsx)("h4",{children:n.title}),Object(d.jsx)("span",{className:"account-id",children:n.spreadsheetId}),Object(d.jsxs)("div",{className:"account-summary",children:[Object(d.jsxs)("div",{className:"account-summary-line",children:[Object(d.jsx)("div",{className:"label-summary",children:"Balance"}),Object(d.jsxs)("div",{className:D()("total-summary",{"text-danger":r<0}),children:["$",r.toLocaleString()]})]}),Object(d.jsxs)("div",{className:"account-summary-line",children:[Object(d.jsx)("div",{className:"label-summary",children:"Buckets"}),Object(d.jsx)("div",{className:"total-summary",children:a.ids.length})]})]})]}),Object(d.jsx)("button",{className:"button-more",onClick:c(n.spreadsheetId),children:Object(d.jsx)(Le.a,{icon:Fe.c})})]})}):null)},rt=function(e){var t=we(),n=[].concat(Object(xe.a)(t.accounts),[e]);ye({accounts:n})},at=function(e){return we().accounts.find((function(t){return t===e}))},ct=function(){var e=Object(De.g)().typeCreation,t=Object(oe.b)(),n=Object(i.useState)(!1),r=Object(j.a)(n,2),a=r[0],c=r[1];return{accounts:Object(oe.c)(Ke),typeCreation:e,showMenu:a,onSetShowMenu:function(e){return function(){c(e)}},onClickDelete:function(){J({description:"Account will be deleted from the app but not from your google drive.",onConfirm:function(){!1!==a&&(c(!1),t(te(a)),function(e){var t=we().accounts.filter((function(t){return t!==e}));ye({accounts:t})}(a))}})}}},it=u.d.div.withConfig({displayName:"accountsstyled__AccountsContainer",componentId:"sc-1g88vn7-0"})(["height:100%;display:flex;align-items:center;justify-content:center;flex-direction:column;.inner-container{padding:0 40px;width:100%;}.accounts-list{margin-bottom:20px;}.add-account-btn{width:100%;}"]),ot=n(74);!function(e){e.missingUrl="Please add a google sheets url",e.missingTitle="A title is required to create a new google sheet",e.invalidUrl="The URL is invalid. Please check if you have access to this google sheets",e.accountExists="Account already exists in the app"}(ve||(ve={}));var st=function(e){var t=function(e){var t=Object(De.f)(),n=B({status:c.loaded,title:"",url:"",show:!!e.type,error:{}}),r=Object(j.a)(n,2),a=r[0],o=r[1],s=Object(oe.b)();Object(i.useEffect)((function(){o({show:!!e.type})}),[e.type,o]);var l=function(){var e=Object(Oe.a)(ge.a.mark((function e(){var t,n,r;return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.url.trim()){e.next=2;break}return e.abrupt("return",o({error:{url:ve.missingUrl}}));case 2:if((t=a.url.match(/^https:\/\/docs\.google\.com\/spreadsheets\/d\/([^/]*)(\/.*)?$/))&&t[1]){e.next=5;break}return e.abrupt("return",o({error:{url:ve.invalidUrl}}));case 5:if(!at(t[1])){e.next=7;break}return e.abrupt("return",o({error:{url:ve.accountExists}}));case 7:return o({status:c.loading,error:{}}),e.prev=8,e.next=11,Ze([t[1]]);case 11:if(n=e.sent,!(r=n.find((function(e){return e.error})))){e.next=15;break}throw new Error(r.error);case 15:return s(ee(n)),rt(t[1]),O("Account created successfully","success"),e.abrupt("return",o({status:c.loaded,show:!1}));case 21:return e.prev=21,e.t0=e.catch(8),e.abrupt("return",o({status:c.loaded,error:{url:Ce(e.t0)}}));case 24:case"end":return e.stop()}}),e,null,[[8,21]])})));return function(){return e.apply(this,arguments)}}(),u=function(){var e=Object(Oe.a)(ge.a.mark((function e(){var t,n;return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.title.trim()){e.next=2;break}return e.abrupt("return",o({error:{url:ve.missingUrl}}));case 2:return o({status:c.loading,error:{}}),e.prev=3,e.next=6,Be(a.title);case 6:if(t=e.sent,n=t.result.spreadsheetId){e.next=10;break}throw new Error("Spreadsheet not returned from api");case 10:return s(Q([n])),rt(n),O("Account created successfully","success"),e.abrupt("return",o({status:c.loaded,show:!1}));case 16:return e.prev=16,e.t0=e.catch(3),e.abrupt("return",o({status:c.loaded,error:{url:Ce(e.t0)}}));case 19:case"end":return e.stop()}}),e,null,[[3,16]])})));return function(){return e.apply(this,arguments)}}();return{type:e.type,state:a,onModalClose:function(){t.push("/")},onCancel:function(){o({show:!1})},handleCreateButton:function(){return"import-account"===e.type?l():"create-account"===e.type?u():void 0},onChangeValue:function(e){return function(t){o(Object(qe.a)({},e,t.target.value))}}}}(e),n=t.state,r=t.type,a=t.onCancel,o=t.onModalClose,s=t.handleCreateButton,l=t.onChangeValue;return Object(d.jsxs)(G,{show:n.show,onClose:o,children:["create-account"===r?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(G.Title,{children:"Create Account"}),Object(d.jsxs)(G.Disclaimer,{children:["Accounts are based on spreadsheets in your google account. You can create a new spreadsheet by filling the title below. If you rather import an existent spreadsheet"," ",Object(d.jsx)(R.b,{to:"/import-account",children:"Click here"})]}),Object(d.jsxs)(ot.a.Group,{children:[Object(d.jsx)(ot.a.Control,{type:"text",placeholder:"Spreadsheet Title",disabled:n.disabled,value:n.title,onChange:l("title")}),n.error.title&&Object(d.jsx)(ot.a.Control.Feedback,{type:"invalid",style:{display:"block"},children:n.error.title})]})]}):"import-account"===r?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(G.Title,{children:"Import Account"}),Object(d.jsxs)(G.Disclaimer,{children:["Accounts are based on spreadsheets in your google account. You can import a spreadsheet by filling its URL below. If you rather create a new spreadsheet ",Object(d.jsx)(R.b,{to:"/create-account",children:"Click here"})]}),Object(d.jsxs)(ot.a.Group,{children:[Object(d.jsx)(ot.a.Control,{type:"text",placeholder:"Spreadsheet URL",disabled:n.disabled,value:n.url,onChange:l("url")}),n.error.url&&Object(d.jsx)(ot.a.Control.Feedback,{type:"invalid",style:{display:"block"},children:n.error.url})]})]}):null,Object(d.jsx)(G.Button,{variant:"primary",disabled:n.disabled,onClick:s,children:"create-account"===r?"Create Account":"Import Account"}),Object(d.jsx)(G.Button,{disabled:n.disabled,onClick:a,children:"Cancel"})]})},lt=u.d.div.withConfig({displayName:"no-accountstyled__NoAccountContainer",componentId:"sc-1iweau6-0"})(["display:flex;flex-direction:column;align-items:center;text-align:center;opacity:0.6;.icon{width:80px;height:80px;}"]),ut=function(){return Object(d.jsxs)(lt,{children:[Object(d.jsx)("i",{className:"fas fa-money-check-alt icon"}),Object(d.jsx)("p",{children:"You don't have any account. Start setting up one by clicking the button below"})]})},dt=function(){var e,t=ct(),n=t.accounts,r=t.typeCreation,a=t.showMenu,c=t.onSetShowMenu,i=t.onClickDelete;return Object(d.jsxs)(it,{children:[n.ids.length>0?Object(d.jsx)("div",{className:"inner-container accounts-list",children:n.ids.map((function(e,t){return n.entities[e]?Object(d.jsx)(nt,{account:n.entities[e],onShowMenu:c},t):null}))}):Object(d.jsx)("div",{className:"inner-container",children:Object(d.jsx)(ut,{})}),Object(d.jsx)("div",{className:"inner-container",children:Object(d.jsxs)(R.b,{to:"/import-account",className:"add-account-btn btn btn-secondary",children:[Object(d.jsx)("i",{className:"fas fa-plus"})," Add Account"]})}),r&&Object(d.jsx)(st,{type:r}),Object(d.jsx)(Ye,{show:!!a,menu:[[{label:"Add Row"},{label:"Delete",className:"text-danger",onClick:i}],[{label:"Cancel",onClick:c(!1)}]],children:!!a&&Object(d.jsx)("strong",{children:null===(e=n.entities[a])||void 0===e?void 0:e.title})})]})},ht=function(){return Object(d.jsx)(R.a,{children:Object(d.jsxs)(De.c,{children:[Object(d.jsx)(He,{path:"/:typeCreation",component:dt}),Object(d.jsx)(He,{path:"/",component:dt})]})})},pt=n(72),bt=Object(u.d)(pt.a).withConfig({displayName:"settingsstyled__SettingsContainer",componentId:"sc-8dvh3z-0"})(["padding-top:50px;h1{margin-bottom:40px;}"]),ft=function(){var e=function(){var e=we(),t=B({client_id:e.client_id,error:{}}),n=Object(j.a)(t,2),r=n[0],a=n[1];return{state:r,onChangeClient:function(e){a({client_id:e.target.value,error:Object(f.a)(Object(f.a)({},r.error),{},{client_id:void 0})})},onSave:function(){if(!r.client_id.trim())return a({error:Object(f.a)(Object(f.a)({},r.error),{},{client_id:"Client ID required"})});ye({client_id:r.client_id}),window.location.reload()}}}(),t=e.state,n=e.onChangeClient,r=e.onSave;return Object(d.jsxs)(bt,{children:[Object(d.jsx)("h1",{children:"Authenticate"}),Object(d.jsxs)("p",{children:["In order for this project to work, we need you to create a new project on"," ",Object(d.jsx)("a",{href:"https://console.developers.google.com",target:"_blank",rel:"noreferrer",children:"https://console.developers.google.com"}),"."]}),Object(d.jsx)("p",{children:"Create a new project and OAUTH 2.0 credential and add the Client ID below. This information will be retained on your device and we will not save it online"}),Object(d.jsxs)("p",{children:["To know more about how create credentials"," ",Object(d.jsxs)("a",{href:"https://developers.google.com/workspace/guides/create-credentials",target:"_blank",rel:"noreferrer",children:["click here ",Object(d.jsx)("i",{className:"fas fa-external-link-alt"})]})]}),Object(d.jsx)("hr",{}),Object(d.jsx)(ot.a,{children:Object(d.jsxs)(ot.a.Group,{className:"mb-3",children:[Object(d.jsx)(ot.a.Label,{children:"Client ID"}),Object(d.jsx)(ot.a.Control,{type:"text",placeholder:"Enter Client ID from Oauth 2",value:t.client_id,onChange:n}),t.error.client_id&&Object(d.jsx)(ot.a.Control.Feedback,{type:"invalid",style:{display:"block"},children:t.error.client_id})]})}),Object(d.jsx)("div",{className:"d-grid",children:Object(d.jsx)(se.a,{variant:"success",onClick:r,children:"Save"})})]})},jt=u.d.div.withConfig({displayName:"splash-screenstyled__SplashScreenContainer",componentId:"sc-67ggma-0"})(["height:100%;width:100%;display:flex;align-items:center;justify-content:center;.splash-screen-inner{font-size:25px;display:flex;flex-direction:column;align-items:center;.splash-screen-spinner{display:block;font-size:40px;color:",";}}"],(function(e){return e.theme.colors.primary})),mt=function(e){var t=e.hasSpinner,n=e.children;return Object(d.jsx)(jt,{children:Object(d.jsxs)("div",{className:"splash-screen-inner",children:[t&&Object(d.jsx)("div",{children:Object(d.jsx)(Le.a,{icon:Fe.d,spin:!0,className:"splash-screen-spinner"})}),n]})})},gt=function(){var e=function(){var e=Object(oe.b)(),t=Object(oe.c)(We),n=Object(i.useCallback)((function(t){e(ae(t))}),[e]);return Object(i.useEffect)((function(){var t=!0,r=we(),a=r.client_id,i=function(){if(t)return n({authenticated:!1,signedin:!1,status:c.loaded})};return a?(Ie().then(Object(Oe.a)(ge.a.mark((function a(){return ge.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return Ee((function(e){if(t)return n({signedin:e})})),e(Q(r.accounts)),a.abrupt("return",n({status:c.loaded,authenticated:!0,signedin:gapi.auth2.getAuthInstance().isSignedIn.get()}));case 3:case"end":return a.stop()}}),a)})))).catch((function(e){t&&(O(e,"danger"),i())})),function(){t=!1}):i()}),[n,e]),{state:t}}(),t=e.state;return t.status===c.initializing?Object(d.jsx)(mt,{hasSpinner:!0,children:"Initialising"}):t.authenticated?t.signedin?Object(d.jsx)(ht,{}):Object(d.jsx)(ze,{}):Object(d.jsx)(ft,{})},Ot=function(){return Object(d.jsx)(oe.a,{store:ie,children:Object(d.jsxs)(b,{children:[Object(d.jsx)(gt,{}),Object(d.jsx)(x,{}),Object(d.jsx)(Y,{})]})})},xt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,75)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))};s.a.render(Object(d.jsx)(Ot,{}),document.getElementById("root")),xt()}},[[69,1,2]]]);
//# sourceMappingURL=main.465a4f4e.chunk.js.map